# name: Send custom JSON data to Slack workflow
 

# on: 
#   push:
#     branches:
#       - version 

# env:
#   SLACK_WEBHOOK_URL: ${{ secrets.SLACK_WEBHOOK_URL }}
#   SLACK_WEBHOOK_TYPE: INCOMING_WEBHOOK


# jobs:
#   name: Slack Notification
#   id: slack
#   uses: slackapi/slack-github-action@v1.26.0
#     with:
#     # For posting a rich message using Block Kit
#     payload: |
#         {
#         "text": "GitHub Action build result: ${{ job.status }}\n${{ github.event.pull_request.html_url || github.event.head_commit.url }}",
#         "blocks": [
#             {
#             "type": "section",
#             "text": {
#                 "type": "mrkdwn",
#                 "text": "GitHub Action build result: ${{ job.status }}\n${{ github.event.pull_request.html_url || github.event.head_commit.url }}"
#             }
#             }
#         ]
#         }
#   env:
#     SLACK_WEBHOOK_URL: ${{ secrets.SLACK_WEBHOOK_URL }}
#     SLACK_WEBHOOK_TYPE: INCOMING_WEBHOOK

#############################################################

name: Slack Notification Demo

on: 
  push:
    branches:
      - version 

env:
  SLACK_WEBHOOK_URL: ${{ secrets.SLACK_WEBHOOK_URL }}
  SLACK_WEBHOOK_TYPE: INCOMING_WEBHOOK

jobs:
  slackNotification:
    name: Slack Notification
    runs-on: ubuntu-latest
    steps:
    - uses: actions/checkout@v2
    - name: Slack Notification
      uses: rtCamp/action-slack-notify@v2
      with: 
        payload: |
          {
          "text": "GitHub Action build result: ${{ job.status }}\n${{ github.event.pull_request.html_url || github.event.head_commit.url }}",
          "blocks": [
              {
              "type": "section",
              "text": {
                  "type": "mrkdwn",
                  "text": "GitHub Action build result: ${{ job.status }}\n${{ github.event.pull_request.html_url || github.event.head_commit.url }}"
              }
              }
          ]
          }
